var menu = Ti.UI.createWindow({
	backgroundColor: "#d92332"
});

var newButton = Ti.UI.createButton({
	top: 20,
	left: 2,
	width: 105,
	height: 50,
	title: "New Releases",
	textAlign: "center",
	color: "white",
	font: {fontFamily: "Verdana", fontWeight: "bold", fontSize: 12},
	backgroundColor: "#d92332",
	border: 2,
	borderColor: "white",
});

var suggestButton = Ti.UI.createLabel({
	top: 20,
	left: 105,
	width: 105,
	textAlign: "center",
	height: 50,
	text: "Suggested",
	color: "#d92332",
	font: {fontFamily: "Verdana", fontWeight: "bold", fontSize: 12},
	backgroundColor: "white",
});

var myPicksButton = Ti.UI.createButton({
	top: 20,
	left: 210,
	width: 105,
	textAlign: "center",
	height: 50,
	title: "My Picks",
	color: "white",
	font: {fontFamily: "Verdana", fontWeight: "bold", fontSize: 12},
	backgroundColor: "#d92332",
	border: 2,
	borderColor: "white",
});

var movieList = [
	{title: "Generic Movie", description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris eros libero, tincidunt nec tincidunt sit amet, scelerisque eget massa. Nullam ac mattis velit. Sed tellus ligula, tempus eget varius vitae, faucibus nec neque. Vestibulum in risus mi. Integer gravida, mauris sed auctor commodo, est libero blandit orci, eu tempor lacus."}, 
	{title: "Generic Movie", description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris eros libero, tincidunt nec tincidunt sit amet, scelerisque eget massa. Nullam ac mattis velit. Sed tellus ligula, tempus eget varius vitae, faucibus nec neque. Vestibulum in risus mi. Integer gravida, mauris sed auctor commodo, est libero blandit orci, eu tempor lacus."},
	{title: "Generic Movie", description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris eros libero, tincidunt nec tincidunt sit amet, scelerisque eget massa. Nullam ac mattis velit. Sed tellus ligula, tempus eget varius vitae, faucibus nec neque. Vestibulum in risus mi. Integer gravida, mauris sed auctor commodo, est libero blandit orci, eu tempor lacus."},
	{title: "Generic Movie", description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris eros libero, tincidunt nec tincidunt sit amet, scelerisque eget massa. Nullam ac mattis velit. Sed tellus ligula, tempus eget varius vitae, faucibus nec neque. Vestibulum in risus mi. Integer gravida, mauris sed auctor commodo, est libero blandit orci, eu tempor lacus."}
];

// Table View
var movies = Ti.UI.createTableView({
	top: 60
});

if(Ti.Platform.name === "iPhone OS"){
	movies.style = Ti.UI.iPhone.TableViewStyle.GROUPED;
}

// Table View Section
var movieTable = Ti.UI.createTableViewSection({
	headerTitle: "Movies based on your viewing history",
});


var getDetail = function(){
	var detailWindow = Ti.UI.createWindow({
		backgroundColor: "#f5f5f5",
		top: 55
	});
	
	var detailTitleView = Ti.UI.createView({
		height: 20,
		backgroundColor: "#fff",
		top: 0
	});
	
	var detailBorder = Ti.UI.createView({
		backgroundColor: "#dbdbdb",
		height: 1,
		top: detailTitleView.height + detailTitleView.top
	});
	
	var detailTitleLabel = Ti.UI.createLabel({
		text: this.title,
		font: {fontSize: 20, fontFamily: "Arial", fontWeight: "bold"},
		top: 30,
		width: "100%", 
		textAlign: "center"
	});
	
	var detailText = Ti.UI.createLabel({
		text: this.desc,
		font: {fontSize: 14, fontFamily: "Arial"},
		top : detailBorder.height + detailBorder.top + 40,
		left: 10,
		right: 10
	});
	
	var closeButton = Ti.UI.createLabel({
		backgroundColor: "#333",
		text: " Close Window",
		color: "#fff",
		height: 50,
		font: {fontSize: 12, fontFamily: "Arial"},
		width: "100%",
		bottom: 0,
		textAlign: "center",
		});

	var closeWindow = function(){
		detailWindow.close({transition: Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});
	};

	closeButton.addEventListener("click", closeWindow);

	detailTitleView.add(detailTitleLabel);
	detailWindow.add(detailTitleView, detailBorder, detailText, closeButton);
	
	detailWindow.open({transition: Ti.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT});

};

for(var i=0, j=movieList.length; i<j; i++){
	var tableRow = Ti.UI.createTableViewRow({
		title: universal[i].title,
		desc: universal[i].description,
		hasDetail:true
	});
	movieTable.add(tableRow);
	tableRow.addEventListener("click", getDetail);
} 

	if(Ti.Platform.name === "iPhone OS"){
		tableRow.hasChild = false;
		tableRow.hasDetail = true;
	}
 
var movieSection = [movieTable];

movies.setData(movieSection);


menu.add(newButton, suggestButton, myPicksButton, parks);
menu.open();
