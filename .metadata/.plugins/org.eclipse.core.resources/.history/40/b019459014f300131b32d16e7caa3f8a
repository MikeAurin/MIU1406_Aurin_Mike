var mainWindow = Ti.UI.createWindow({
	title: "Mike Aurin"
});

var JSON = require("JSON");

var navWindow = Ti.UI.iOS.createNavigationWindow({
	window: mainWindow
});

var titleView = Ti.UI.createView({
	height: 50,
	backgroundColor: "#fff",
	top: 0
});

var border = Ti.UI.createView({
	backgroundColor: "#dbdbdb",
	height: 1,
	top: titleView.height + titleView.top
});

var titleLabel = Ti.UI.createLabel({
	text: "About Me Application",
	font: {fontSize: 24, fontFamily: "Roboto"},
	top: 10,
	width: "100%",
	textAlign: "center"
});

var table = Ti.UI.createTableView({
	top: 15
});

if(Ti.Platform.name === "iPhone OS"){
	table.style = Ti.UI.iPhone.TableViewStyle.GROUPED;
}

var tableSection = Ti.UI.createTableViewSection({

	});


var info = [tableSection];
	table.setData(info);
	mainWindow.add(table);

var getDetail = function (){
	var detailWindow = Ti.UI.createWindow({
		title: this.title,
		font: {fontSize:10, fontFamily: "Arial", fontColor: "#000"},
	    backgroundColor: "#fff"
	});
	var detailView = Ti.UI.createView({
	backgroundColor: "#fff",
	borderColor: "#000",
	borderRadius: 5,
	borderWidth: 1,
	top: 30,
	left: 20,
	right: 20,
	bottom: 120
	});
	var detailText = Ti.UI.createLabel({
		text: this.desc,
		font: {fontSize:14, fontFamily: "Arial", fontColor: "#000"},
		top: 25,
		right: 25,
		left: 25,
		bottom:25,
		textAlign: "center"
	});
	detailWindow.add(detailView);
	detailView.add(detailText);
	navWindow.openWindow(detailWindow);
};

for(n in JSON.infoData){

	for(m in JSON.infoData[n].aboutAustin){
		var theRow = Ti.UI.createTableViewRow({
		title: JSON.infoData[n].aboutAustin[m].title,
		desc: JSON.infoData[n].aboutAustin[m].description,
	    hasChild: true
	});

	if(Ti.Platform.name === "iPhone OS"){
		theRow.hasChild = false;
		theRow.hasDetail = true;

	tableSection.add(theRow);
	theRow.addEventListener("click", getDetail);
	};
	};	
};


titleView.add(titleLabel);
mainWindow.add(titleView, border, table);
navWindow.open(); 
